<?xml version="1.0"	encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"	
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="product">
	<select id="productList" parameterType="categoryDTO" resultType="productDTO">
		select * 
		from product
		<if test="cate_no != 1">
			WHERE cate_no=#{cate_no};
		</if>
	</select>
	<insert id="productAdd" parameterType="productDTO">
		INSERT INTO product (p_name, cate_no, p_description, p_price, p_stock, p_img)
	 	VALUES (#{p_name}, #{cate_no}, #{p_description}, #{p_price}, #{p_stock}, #{p_img})
	</insert>
	<select id="productDetail" parameterType="integer" resultType="productDTO">
		SELECT *
		FROM product
		WHERE p_no = #{p_no}
	</select>
	<insert id="productReview" parameterType="reviewDTO">
		INSERT INTO review (p_no, u_no, r_rating, r_title, r_content)
		VALUES (#{p_no}, #{u_no}, #{r_rating}, #{r_title}, #{r_content})
	</insert>
	<insert id="cartAdd" parameterType="cartDTO">
		INSERT INTO cart (p_no, u_no, p_count)
		VALUES (#{p_no}, #{u_no}, #{p_count})
	</insert>
</mapper>